(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pet/pet"],{"10f3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){return n.e("components/modalComponent").then(n.bind(null,"f372"))},i=function(){return n.e("components/btnComponent").then(n.bind(null,"cbb7"))},r=function(){return n.e("components/listItemComponent").then(n.bind(null,"f564"))},s={components:{modalComponent:a,btnComponent:i,listItemComponent:r},data:function(){return{requestCount:1,userCurrency:{},spriteInfo:{},invitList:[],invitAward:"",modal:"",modalTitle:"",earnCuttime:1,skillShow:!1,skillList:[],currentSkillType:1}},onShareAppMessage:function(t){var e=t.target&&t.target.dataset.share;return this.$app.commonShareAppMessage(e)},onLoad:function(){},onShow:function(){this.getSpriteInfo(),this.initInterval(),this.getInvitList(),this.userCurrency=this.$app.getData("userCurrency")||{coin:0,stone:0,trumpet:0}},methods:{initInterval:function(){var t=this;clearInterval(this.$app.petTimeId),this.$app.petTimeId=setInterval(function(){t.earnCuttime++,t.earnCuttime>100&&(t.earnCuttime=1,t.getSpriteInfo())},1e3)},tapSprite:function(){var t=this;this.spriteInfo.need_stone&&this.userCurrency.stone>=this.spriteInfo.need_stone&&this.$app.request(this.$app.API.SPRITE_UPGRAGE,{},function(e){t.$app.request(t.$app.API.USER_CURRENCY,{},function(e){t.$app.setData("userCurrency",e.data),t.userCurrency=t.$app.getData("userCurrency")}),t.getSpriteInfo(),t.$app.toast("升级成功","success")},"POST",!0)},openSkillModal:function(t){this.modal="skill",this.currentSkillType=t,this.getSkill()},openInvitModal:function(){this.modal="invit",this.getInvitList()},skillUpgrade:function(){var t=this;this.modal="",this.$app.request(this.$app.API.SPRITE_UPGRAGE,{type:this.currentSkillType},function(e){t.$app.request(t.$app.API.USER_CURRENCY,{},function(e){t.$app.setData("userCurrency",e.data),t.userCurrency=t.$app.getData("userCurrency")}),t.getSpriteInfo(),t.$app.toast("升级成功","success")})},getSkill:function(){var t=this;this.$app.request(this.$app.API.SPRITE_SKILL,{type:this.currentSkillType},function(e){var n=[];if(1==t.currentSkillType){t.modalTitle="助人为乐";var a=!0,i=!1,r=void 0;try{for(var s,o=e.data[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=s.value,p={level:u.level,desc:"对方"+u.percent+"%能量的奖励",need_stone:"升级需要消耗"+u.need_stone+"灵丹",avatar:"/static/image/pet/skillone-n.png"};u.level<=t.spriteInfo.skillone_level&&(p.status=1),n.push(p)}}catch(l){i=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}}t.skillList=n})},getInvitList:function(){var t=this;this.$app.request(this.$app.API.USER_INVITLIST,{type:1},function(e){t.invitAward=e.data.award;var n=[];e.data.list.forEach(function(e,a){n.push({avatar:e.user&&e.user.avatarurl||t.$app.AVATAR,status:e.status,uid:e.user.id,nickname:e.user&&e.user.nickname||t.$app.NICKNAME,earn:e.sprite.earn})}),t.invitList=n})},goOther:function(t){this.modal="",this.$app.goPage("/pages/pet/other/other?user_id="+t)},settle:function(){var t=this;0==this.spriteInfo.earn?this.$app.toast("能量太少了，稍后再来吧"):this.$app.request(this.$app.API.SPRITE_SETTLE,{user_id:this.$app.getData("userInfo").id,settle:this.spriteInfo.earn},function(e){t.getSpriteInfo(),t.$app.toast("收集成功,能量+"+e.data),t.$app.request(t.$app.API.USER_CURRENCY,{},function(e){t.$app.setData("userCurrency",e.data),t.userCurrency=t.$app.getData("userCurrency")}),t.earnCuttime=0,t.initInterval()},"POST",!0)},getSpriteInfo:function(){var t=this;this.$app.request(this.$app.API.SPRITE_INFO,{user_id:this.$app.getData("userInfo").id},function(e){t.spriteInfo=e.data,e.data.isFull?(t.$app.toast("能量已满了，快点收能量吧"),clearInterval(t.$app.petTimeId),t.earnCuttime=100):t.initInterval(),t.$app.closeLoading(t)})}}};e.default=s},"3d0e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.$app.goPage("/pages/notice/notice?id=2")},t.e1=function(e){t.modal=""},t.e2=function(e){t.modal=""})},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},"5a32":function(t,e,n){"use strict";var a=n("7022"),i=n.n(a);i.a},"5d5f":function(t,e,n){"use strict";n.r(e);var a=n("3d0e"),i=n("8e66");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("5a32");var s=n("2877"),o=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,"20178a40",null);e["default"]=o.exports},7022:function(t,e,n){},"8e66":function(t,e,n){"use strict";n.r(e);var a=n("10f3"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a}},[["0339","common/runtime","common/vendor"]]]);