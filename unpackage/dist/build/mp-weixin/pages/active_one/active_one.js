(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/active_one/active_one"],{"15fc":function(t,e,a){"use strict";a.r(e);var n=a("bcb4"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},"1a1d":function(t,e,a){},"48d7":function(t,e,a){"use strict";a.r(e);var n=a("7315"),i=a("15fc");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a("b501");var o=a("2877"),c=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"9ba3d0d4",null);e["default"]=c.exports},7315:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=(t._self._c,(t.activeInfo.join_people/t.activeInfo.active_info.target_people*100).toFixed(1)),n=(t.activeInfo.complete_people/t.activeInfo.active_info.target_people*100).toFixed(1);t._isMounted||(t.e0=function(e){return t.$app.goPage("/pages/fanclub/fanclub?starname="+t.star.name)},t.e1=function(e){t.modal=""}),t.$mp.data=Object.assign({},{$root:{g0:a,g1:n}})},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},b501:function(t,e,a){"use strict";var n=a("1a1d"),i=a.n(n);i.a},bcb4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return a.e("components/modalComponent").then(a.bind(null,"f372"))},i=function(){return a.e("components/btnComponent").then(a.bind(null,"cbb7"))},r={components:{modalComponent:n,btnComponent:i},data:function(){return{star:{},activeInfo:{active_info:{target_people:2e3},can_card:!0,complete_people:0,join_people:0,left_time:"0天0小时0分",my_card_days:0},userRank:[],modal:"",cardOverContent:"",article:this.$app.getData("config").active_notice}},onShareAppMessage:function(t){var e=t.target&&t.target.dataset.share;return this.$app.commonShareAppMessage(e)},onLoad:function(t){this.starid=t.starid,this.getActiveInfo(),this.getStarInfo(),this.getActiveUserRank()},methods:{getStarInfo:function(){var t=this;this.$app.request(this.$app.API.STAR_INFO,{starid:this.starid},function(e){var a=e.data;t.star={id:a.id,avatar:a.head_img_s?a.head_img_s:a.head_img_l,name:a.name,weekHot:t.$app.formatNumberRgx(a.star_rank.week_hot),weekRank:a.star_rank.week_hot_rank},t.$app.closeLoading(t)})},card:function(){var t=this;this.$app.getData("userStar").id==this.starid?(this.modal="cardOver",this.activeInfo.can_card?this.$app.request(this.$app.API.EXT_ACTIVECARD,{},function(e){t.getActiveInfo(),t.getActiveUserRank(),t.cardOverContent="打卡成功"},"POST",!0):this.cardOverContent="今日已打卡"):this.$app.toast("你怎么能为别的爱豆打卡呢")},getActiveUserRank:function(){var t=this;this.$app.request(this.$app.API.EXT_ACTIVE_USERRANK,{starid:this.starid},function(e){var a=[],n=!0,i=!1,r=void 0;try{for(var o,c=e.data[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;s.user.nickname&&a.push({active_card_days:s.active_card_days,user:s.user})}}catch(u){i=!0,r=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw r}}t.userRank=a})},getActiveInfo:function(){var t=this;this.$app.request(this.$app.API.EXT_ACTIVEINFO,{starid:this.starid},function(e){var a=t.$app.timeGethms(e.data.active_info.end_date-Math.round((new Date).getTime()/1e3));e.data.left_time=a.day+"天"+a.hour+"小时"+a.min+"分",t.activeInfo=e.data})}}};e.default=r}},[["28e0","common/runtime","common/vendor"]]]);