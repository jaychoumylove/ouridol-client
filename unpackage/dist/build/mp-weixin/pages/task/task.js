(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/task/task"],{"1e22":function(t,a,e){"use strict";var s=e("eaf3"),i=e.n(s);i.a},"51e8":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=function(){return e.e("components/btnComponent").then(e.bind(null,"cbb7"))},i=function(){return e.e("components/modalComponent").then(e.bind(null,"f372"))},n={components:{btnComponent:s,modalComponent:i},data:function(){return{requestCount:1,taskList:this.$app.getData("taskList")||[],modal:"",shareText:"",weiboUrl:"",weibo_zhuanfa:{}}},onShow:function(){this.getTaskList()},onLoad:function(){this.getShareText()},onShareAppMessage:function(t){var a=t.target&&t.target.dataset.share;return this.$app.commonShareAppMessage(a)},methods:{initVideoAd:function(){var t=this;wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-9fa8b9c723fc27be"}),this.videoAd.onClose(function(a){if(a&&a.isEnded||void 0===a)for(var e in t.taskList){var s=t.taskList[e];7==s.type&&(t.taskList[e].status=1)}else t.$app.toast("观看完视频才有奖励哦")}),this.videoAd.onError(function(a){t.$app.toast("抱歉，暂无合适的广告"),console.error("视频广告播放错误",a)}))},openAdver:function(){var t=this;this.videoAd||this.initVideoAd(),this.videoAd?this.videoAd.show().catch(function(a){t.videoAd.load().then(function(){t.videoAd.show().catch(function(a){t.$app.toast("视频广告打开失败")})})}):this.$app.toast("视频广告打开失败")},clipboard:function(){var a=this;t.setClipboardData({data:this.shareText,success:function(){a.$app.toast("复制成功","success")}})},weiboCommit:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.weiboUrl&&this.$app.request(this.$app.API.TASK_WEIBO,{weiboUrl:this.weiboUrl,type:a},function(a){t.$app.toast("提交成功","success"),t.modal="",t.weiboUrl="",t.getTaskList()})},doTask:function(t,a){var e=this;if(0==t.status){if(4==t.task_type.id&&~this.$app.getData("sysInfo").system.indexOf("iOS"))return;7==t.task_type.id?this.openAdver():8==t.task_type.id?this.modal="weibo":12==t.task_type.id?this.$app.request(this.$app.API.SHARE_STARMASS,{},function(t){}):14==t.task_type.id?this.modal="weibo_zhuanfa":t.task_type.gopage&&this.$app.goPage(t.task_type.gopage)}else 1==t.status&&(this.taskList[a].status=2,this.$app.request(this.$app.API.TASK_SETTLE,{task_id:t.id},function(t){var a="领取成功";t.data.coin&&(a+="，能量+"+t.data.coin),t.data.stone&&(a+="，灵丹+"+t.data.stone),t.data.trumpet&&(a+="，喇叭+"+t.data.trumpet),e.$app.toast(a),e.getTaskList(),e.$app.request(e.$app.API.USER_CURRENCY,{},function(t){e.$app.setData("userCurrency",t.data)})},"POST",!0))},getShareText:function(){var t=this;this.$app.request(this.$app.API.EXT_SHARETEXT,{},function(a){t.shareText=a.data.share_text,t.weibo_zhuanfa=a.data.weibo_zhuanfa})},getTaskList:function(){var t=this;this.$app.request(this.$app.API.TASK,{},function(a){var e=[];t.$app.isTaskAllDone=!0;var s=!0,i=!1,n=void 0;try{for(var o,r=a.data[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var p=o.value;0==p.status&&(t.$app.isTaskAllDone=!1),e.push({id:p.id,coin:p.coin||0,stone:p.stone||0,trumpet:p.trumpet||0,status:p.status,name:p.name,doneTimes:p.doneTimes,times:p.times,type:p.type,desc:p.desc,task_type:{id:p.task_type.id,gopage:p.task_type.gopage,btn_text:p.task_type.btn_text,img:p.task_type.img}})}}catch(u){i=!0,n=u}finally{try{s||null==r.return||r.return()}finally{if(i)throw n}}t.taskList=e,t.$app.setData("taskList",t.taskList),t.$app.closeLoading(t)})}}};a.default=n}).call(this,e("543d")["default"])},7676:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=(t._self._c,t.$app.getData("sysInfo").system.indexOf("iOS")),s=t.$app.getData("config"),i=t.$app.getData("config"),n=t.$app.getData("sysInfo").system.indexOf("iOS");t._isMounted||(t.e0=function(a){t.modal=""},t.e1=function(a){t.weiboUrl=a.detail.value},t.e2=function(a){t.modal=""},t.e3=function(a){t.weiboUrl=a.detail.value}),t.$mp.data=Object.assign({},{$root:{g0:e,g1:s,g2:i,g3:n}})},i=[];e.d(a,"a",function(){return s}),e.d(a,"b",function(){return i})},"7f21":function(t,a,e){"use strict";e.r(a);var s=e("7676"),i=e("b149");for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);e("1e22");var o=e("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,"66ae798e",null);a["default"]=r.exports},b149:function(t,a,e){"use strict";e.r(a);var s=e("51e8"),i=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);a["default"]=i.a},eaf3:function(t,a,e){}},[["69b7","common/runtime","common/vendor"]]]);