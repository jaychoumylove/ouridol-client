"use strict";!function(t,e){module.exports=function(){var t=require("./xhtad_conf.js"),e=require("./xhtad_md5.js");if(!t.app_key||22!==t.app_key.length)return console.warn("\u5C0F\u4E92\u63A8\u63D0\u793A\uFF1A\u914D\u7F6E\u9519\u8BEF\uFF0C\u8BF7\u5728xhtad_conf.js\u4E2D\u6B63\u786E\u914D\u7F6E\u60A8\u7684app_key\u3002"),!1;var n="https://log.xiaohutui.com",u={ak:t.app_key.replace(/(^\s*)|(\s*$)/g,""),v:"1.3",pb:"",pm:"",sv:"",pv:"",nt:"",ww:0,wh:0,pr:0,long:0,lat:0,wvv:"",wv:"",lang:"",pp:"",uuid:"",user_info:{}},o=0,edata='',a=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1);}
var e;try{if(e=wx.getStorageSync("xhtaduuid"))return e;}catch(t){}
e=t()+t()+t()+t()+t()+t()+t()+t();try{wx.setStorageSync("xhtaduuid",e);}catch(t){}
return e;},i=function(t){var e=t.split("&"),n={};for(var u in e){e[u]=e[u].split("="),n[e[u][0]]=e[u][1];}
return n;},r=function(t){u.uuid=a(),c(t);},ca=function(o){wx.getSetting({success:function(a){a.authSetting["scope.userInfo"]||setTimeout(function(){wx.getSetting({success:function(a){if(a.authSetting["scope.userInfo"]){c=Date.parse(new Date())/1e3,s=e.hexMD5(u.ak+u.uuid+c);wx.getUserInfo({success:function(t){if(!edata)return false;wx.request({url:n+"/auth",method:"POST",data:{d_key:s,time:c,encdata:edata,uuid:u.uuid,user_info:t.userInfo},success:function(){}});}});}else ca(o);}});},6000);}});},c=function(o){edata=1037==o.scene?(o.referrerInfo.extraData||{}).encdata||o.query.encdata:i(decodeURIComponent(o.query.scene)).encdata,wx.login({success:function(t){if(!edata)return false;var e={jscode:encodeURIComponent(t.code),uuid:u.uuid,appkey:u.ak,encdata:edata};wx.request({url:n+"/log/stat/init",method:"post",data:e});},fail:function(){}}),ca(o)},s=function(t,e,n){var u=t[e];t[e]=function(t){u&&u.call(this,t),n.call(this,t);};},f=function(t){var e=App;App=function(t){s(t,"onLaunch",r),e(t);};};return f();}();}();