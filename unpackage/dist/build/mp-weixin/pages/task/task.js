(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/task/task"],{"3ea3":function(t,e,a){"use strict";var s=a("5f21"),n=a.n(s);n.a},"51e8":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return a.e("components/btnComponent").then(a.bind(null,"cbb7"))},n=function(){return a.e("components/modalComponent").then(a.bind(null,"f372"))},i={components:{btnComponent:s,modalComponent:n},data:function(){return{requestCount:1,taskList:this.$app.getData("taskList")||[],videoAd:null,modal:"",shareText:"",weiboUrl:""}},onShow:function(){this.getTaskList()},onLoad:function(){this.initVideoAd(),this.getShareText()},onShareAppMessage:function(t){var e=t.target&&t.target.dataset.share;return this.$app.commonShareAppMessage(e)},methods:{initVideoAd:function(){var t=this;wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-9fa8b9c723fc27be"}),this.videoAd.onClose(function(e){if(e&&e.isEnded||void 0===e)for(var a in t.taskList){var s=t.taskList[a];7==s.type&&(t.taskList[a].status=1)}else t.$app.toast("观看完视频才有奖励哦")}),this.videoAd.onError(function(e){t.$app.toast("抱歉，暂无合适的广告"),console.error("视频广告播放错误",e)}))},openAdver:function(){var t=this;this.videoAd&&this.videoAd.show().catch(function(e){t.videoAd.load().then(function(){t.videoAd.show()})})},clipboard:function(){var e=this;t.setClipboardData({data:this.shareText,success:function(){e.$app.toast("复制成功","success")}})},weiboCommit:function(){var t=this;this.$app.request(this.$app.API.TASK_WEIBO,{weiboUrl:this.weiboUrl},function(e){t.$app.toast("提交成功","success"),t.modal="",t.getTaskList()})},doTask:function(t,e){var a=this;if(0==t.status){if(4==t.task_type.id&&~this.$app.getData("sysInfo").system.indexOf("iOS"))return;7==t.task_type.id?this.openAdver():8==t.task_type.id?this.modal="weibo":12==t.task_type.id?this.$app.request(this.$app.API.SHARE_STARMASS,{},function(t){}):t.task_type.gopage&&this.$app.goPage(t.task_type.gopage)}else 1==t.status&&(this.taskList[e].status=2,this.$app.request(this.$app.API.TASK_SETTLE,{task_id:t.id},function(t){var e="领取成功";t.data.coin&&(e+="，能量+"+t.data.coin),t.data.stone&&(e+="，灵丹+"+t.data.stone),t.data.trumpet&&(e+="，喇叭+"+t.data.trumpet),a.$app.toast(e),a.getTaskList(),a.$app.request(a.$app.API.USER_CURRENCY,{},function(t){a.$app.setData("userCurrency",t.data)})},"POST",!0))},getShareText:function(){var t=this;this.$app.request(this.$app.API.EXT_SHARETEXT,{},function(e){t.shareText=e.data})},getTaskList:function(){var t=this;this.$app.request(this.$app.API.TASK,{},function(e){var a=[];t.$app.isTaskAllDone=!0;var s=!0,n=!1,i=void 0;try{for(var o,r=e.data[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var p=o.value;0==p.status&&(t.$app.isTaskAllDone=!1),a.push({id:p.id,coin:p.coin||0,stone:p.stone||0,trumpet:p.trumpet||0,status:p.status,name:p.name,doneTimes:p.doneTimes,times:p.times,type:p.type,desc:p.desc,task_type:{id:p.task_type.id,gopage:p.task_type.gopage,btn_text:p.task_type.btn_text,img:p.task_type.img}})}}catch(d){n=!0,i=d}finally{try{s||null==r.return||r.return()}finally{if(n)throw i}}t.taskList=a,t.$app.setData("taskList",t.taskList),t.$app.closeLoading(t)})}}};e.default=i}).call(this,a("543d")["default"])},"5f21":function(t,e,a){},"7f21":function(t,e,a){"use strict";a.r(e);var s=a("b1e8"),n=a("b149");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("3ea3");var o=a("2877"),r=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,"d4695d54",null);e["default"]=r.exports},b149:function(t,e,a){"use strict";a.r(e);var s=a("51e8"),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},b1e8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=(t._self._c,t.$app.getData("sysInfo").system.indexOf("iOS")),s=t.$app.getData("config"),n=t.$app.getData("config"),i=t.$app.getData("sysInfo").system.indexOf("iOS");t._isMounted||(t.e0=function(e){t.modal=""},t.e1=function(e){t.weiboUrl=e.detail.value}),t.$mp.data=Object.assign({},{$root:{g0:a,g1:s,g2:n,g3:i}})},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})}},[["69b7","common/runtime","common/vendor"]]]);